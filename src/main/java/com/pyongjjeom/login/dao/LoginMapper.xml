<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pyongjjeom.login.dao.LoginMapper">

	<select id="checkMemberLogin" parameterType="hashmap" resultType="Member">

	</select>

	<insert id="createMember" parameterType="Member">
		insert into member(email, memnm, birth, passwd)
		values(#{email},#{memnm},#{birth},#{passwd}); 
	</insert>

	<select id="getMemCD" parameterType="string" resultType="string">
		select memcd
		from member where email = #{email};
	</select>

	<update id="updateEmailAuthCD" parameterType="Member">
		UPDATE member
		SET
		emailauthyn = 'N',
		emailauthcd = '${emailAuthCD}',
		updatedate = now()
		WHERE memcd
		= '${memCD}'
		AND email = '${email}';
	</update>

	<update id="updateEmailAuthCDCheck" parameterType="Member">
		UPDATE member
		SET
		emailauthyn = 'Y',
		emailauthcd = '',
		updatedate = now()
		WHERE memcd = '${memCD}'
		AND email = '${email}';
	</update>

	<select id="getEmailAuthCD" parameterType="string" resultType="string">
		SELECT
		emailauthcd FROM member
		where email = #{email};
	</select>

</mapper>