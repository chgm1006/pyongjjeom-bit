<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pyongjjeom.login.dao.LoginMapper">

	<select id="checkMemberLogin" parameterType="hashmap" resultType="Member">
		select email from member where email = #
	</select>
	
	<select id="login" resultType="Member">
	    select *  from member where email=#{email}  and passwd=#{passwd}
	    
	</select>
	
	<insert id="insertMember" parameterType="Member">
		insert into member(memcd, email, memkind, memnm, birth, passwd, emailauthyn, memvalid, fbyn, regidate, updatedate)
		values(#{memCD},#{email},'G',#{memNm},#{birth},#{passwd},'N','A','N',now(),now()); 
	</insert>

	<select id="getMemCD" parameterType="string" resultType="string">
		select memcd
		from member where email = #{email};
	</select>

	<update id="updateEmailAuthCD" parameterType="Member">
		UPDATE member
		SET
		emailauthyn = 'N',
		emailauthcd = '${emailAuthCD}',
		updatedate = now()
		WHERE memcd
		= '${memCD}'
		AND email = '${email}';
	</update>

	<update id="updateEmailAuthCDCheck" parameterType="Member">
		UPDATE member
		SET
		emailauthyn = 'Y',
		emailauthcd = '',
		updatedate = now()
		WHERE memcd = '${memCD}'
		AND email = '${email}';
	</update>

	<select id="getEmailAuthCD" parameterType="string" resultType="string">
		SELECT
		emailauthcd FROM member
		where email = #{email};
	</select>

</mapper>