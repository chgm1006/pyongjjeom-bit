<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pyongjjeom.notice.dao.NoticeMapper">




	<insert id="insertData" parameterType="Notice">
		insert into notice
		(notCD,writer,title,issue,notPasswd,category,permit,deleteyn,regidate,updatedate)
		values
		(#{notCD},#{writer},#{title},#{issue},#{notPasswd},#{category},'ADMIN','N',now(),now());


	</insert>

	<select id="getAllNoticeDatas" resultType="Notice">

		select * from notice where
		ifnull(deleteyn,'N')='N'
		order by regidate desc;

	</select>

	<select id="getSystemNoticeDatas" resultType="Notice">


		select * from notice where ifnull(deleteyn,'N')='N' and category = 'SM'
			order by regidate desc;
		
	

	</select>

	<select id="getEventNoticeDatas" resultType="Notice">
	    
		select * from notice where ifnull(deleteyn,'N')='N' and category = 'EV'
			order by regidate desc;

	</select>
	
	<select id="getDeleteNoticeDatas" resultType="Notice">


		select * from notice where ifnull(deleteyn,'N')='Y' 
	order by regidate desc;

	</select>


	<select id="updateData" parameterType="String" resultType="Notice">

		select * from
		notice where notCD= #{notCD};

	</select>



	<select id="getCode" resultType="NoticeCode">
		select code,codenm from common_cd
		where
		codegrp = 'notice'
		order by code;
	</select>


	<update id="deleteData" parameterType="string">
		update notice
		set deleteyn = 'Y'
		where notCD= #{notCD};
	</update>

	<update id="editData" parameterType="Notice">
		update notice
		set writer=#{writer},
		title=#{title},issue=#{issue},
		notPasswd=#{notPasswd},category=#{category},updatedate=now() where notCD=#{notCD};


	</update>
	
	<select id = "paging" resultType ="String"> 
	    
	   select count(*) from notice where
		ifnull(deleteyn,'N')='N';
	    
	    </select>




</mapper>